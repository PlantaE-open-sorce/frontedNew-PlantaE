<main class="forgot-page">
  <article class="forgot-card">
    <div class="forgot-lang" *ngIf="languages.length">
      <div class="lang-toggle">
        <button
          type="button"
          *ngFor="let lang of languages"
          [class.active]="isLang(lang)"
          (click)="changeLang(lang)"
        >
          {{ lang | uppercase }}
        </button>
      </div>
    </div>
    <div class="forgot-card__icon">
      <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
        <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
      </svg>
    </div>
    <h1>{{ 'iam:forgot.title' | t:'Recuperar contraseña' }}</h1>
    <p class="forgot-card__subtitle">{{ 'iam:forgot.subtitle' | t:'Te enviaremos instrucciones si el correo existe.' }}</p>
    
    <form [formGroup]="form" (ngSubmit)="submit()" class="forgot-card__form">
      <label>
        <span>{{ 'iam:forgot.email' | t:'Correo electrónico' }}</span>
        <input 
          formControlName="email" 
          type="email" 
          placeholder="tu@email.com"
          [class.input--error]="form.controls.email.touched && form.controls.email.invalid"
        />
      </label>
      <button 
        class="btn btn--primary" 
        type="submit" 
        [disabled]="form.invalid || submitting()"
      >
        <span *ngIf="!submitting()">{{ 'iam:forgot.action' | t:'Enviar' }}</span>
        <span *ngIf="submitting()" class="btn__loading">
          <span class="btn__spinner"></span>
          {{ 'common:generic.loading' | t:'Enviando...' }}
        </span>
      </button>

      <p class="forgot-card__success" *ngIf="successMessage()">
        {{ successMessage() }}
      </p>
    </form>
    
    <a routerLink="/login" class="forgot-card__back">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <line x1="19" y1="12" x2="5" y2="12"></line>
        <polyline points="12 19 5 12 12 5"></polyline>
      </svg>
      {{ 'common:actions.back' | t:'Volver al inicio' }}
    </a>
  </article>
</main>
