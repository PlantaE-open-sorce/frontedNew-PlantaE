<div class="page-layout animate-fade-in">
  <app-confirmation-modal *ngIf="showDeleteModal" [title]="'plants:management.deleteTitle' | t:'Eliminar planta'"
    [message]="'plants:management.deleteMessage' | t:'Esta acciÃ³n no se puede deshacer. Â¿Deseas continuar?'"
    [confirmText]="'plants:management.actions.delete' | t:'Eliminar'" (confirm)="confirmDelete()"
    (cancel)="showDeleteModal = false"></app-confirmation-modal>
  <div class="page-header">
    <div>
      <p class="eyebrow">{{ 'plants:management.eyebrow' | t:'ColecciÃ³n' }}</p>
      <h1>{{ 'plants:management.title' | t:'GestiÃ³n de plantas' }}</h1>
      <p class="text-muted">{{ 'plants:management.subtitle' | t:'Administra tu colecciÃ³n y monitorea su estado.' }}</p>
    </div>
    <div class="header-actions">
      <a routerLink="/plants/new" class="btn btn--primary">
        <span class="icon-plus">+</span>
        {{ 'plants:management.actions.add' | t:'AÃ±adir planta' }}
      </a>
    </div>
  </div>

  <div class="card-minimal table-container" *ngIf="plants().length; else emptyState">
    <table class="clean-table">
      <thead>
        <tr>
          <th>{{ 'plants:management.table.name' | t:'Nombre' }}</th>
          <th>{{ 'plants:management.table.status' | t:'Estado' }}</th>
          <th>{{ 'plants:management.table.alerts' | t:'Alertas' }}</th>
          <th class="text-right">{{ 'plants:management.table.actions' | t:'Acciones' }}</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let plant of plants(); trackBy: trackById" class="table-row">
          <td class="font-medium">{{ plant.name }}</td>
          <td>
            <span class="status-badge" [class.status-active]="plant.status === 'ACTIVE'">
              {{ plant.status ?? ('common:generic.na' | t:'N/D') }}
            </span>
          </td>
          <td>
            <span class="alert-indicator" *ngIf="plant.hasAlerts; else noAlerts">
              <span class="dot-warning"></span>
              {{ 'plants:management.alerts.yes' | t:'Activas' }}
            </span>
            <ng-template #noAlerts>
              <span class="text-muted">{{ 'plants:management.alerts.no' | t:'Sin alertas' }}</span>
            </ng-template>
          </td>
          <td class="actions-cell">
            <div class="action-buttons">
              <a [routerLink]="['/plants', plant.id]" class="btn-icon btn-icon--ghost"
                title="{{ 'plants:management.actions.view' | t:'Ver detalles' }}">
                ğŸ‘ï¸
              </a>
              <button type="button" class="btn-icon btn-icon--danger-ghost" (click)="delete(plant.id)"
                title="{{ 'plants:management.actions.delete' | t:'Eliminar' }}">
                âŒ
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <ng-template #emptyState>
    <div class="empty-state animate-fade-in">
      <div class="empty-illustration">ğŸŒ±</div>
      <h3>{{ 'plants:management.empty' | t:'Tu jardÃ­n estÃ¡ vacÃ­o' }}</h3>
      <p class="text-muted">{{ 'plants:management.emptyDesc' | t:'Comienza aÃ±adiendo tu primera planta para
        monitorearla.' }}</p>
      <a routerLink="/plants/new" class="btn btn--primary mt-4">
        {{ 'plants:management.actions.addFirst' | t:'AÃ±adir primera planta' }}
      </a>
    </div>
  </ng-template>
</div>